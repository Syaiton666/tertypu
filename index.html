<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kuis</title>

<style>
body{
  margin:0;
  background:#e9e9e9;
  font-family:Arial;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:40px 20px;
}

.quiz-box{
  width:300px;
  border:4px solid #2f3e5c;
  background:#fff;
  padding:20px;
  text-align:center;
}

.quiz-box img{ width:100%; margin-top:10px; }

.video-box{
  margin-top:40px;
  width:90%;
  max-width:900px;
  border:4px solid #2f3e5c;
  background:#fff;
  padding:10px;
}

video{ width:100%; background:#000; }
</style>
</head>

<body>

<div class="quiz-box">
  <h2>Silahkan Anda Mengisi Kuis Pada QR Di Bawah :)</h2>
  <img src="./Phising.png" alt="Kuis Phising">
</div>

<div class="video-box">
  <video id="video" autoplay muted loop playsinline controls preload="auto">
    <source src="./vid.mp4" type="video/mp4">
  </video>
</div>

<script>
const video = document.getElementById("video");

window.addEventListener("load", async () => {
  try { await video.play(); } catch (e) {}
});

let armed = true;

function tryEnableSound() {
  if (!armed) return;

  // coba unmute + play
  video.muted = false;
  video.volume = 1;

  video.play().then(() => {
    // sukses -> lepas semua listener
    armed = false;
    removeArmEvents();
  }).catch(() => {
    // kalau masih diblokir, biarkan armed = true
    // (akan coba lagi pada interaksi berikutnya)
  });
}

function addArmEvents(){
  // Interaksi paling umum
  window.addEventListener("pointerdown", tryEnableSound, { passive:true });
  window.addEventListener("touchstart", tryEnableSound, { passive:true });
  window.addEventListener("mousedown", tryEnableSound, { passive:true });
  window.addEventListener("keydown", tryEnableSound);
  window.addEventListener("wheel", tryEnableSound, { passive:true });     // scroll mouse
  window.addEventListener("scroll", tryEnableSound, { passive:true });    // scroll page (kadang tidak dianggap gesture di iOS)
}

function removeArmEvents(){
  window.removeEventListener("pointerdown", tryEnableSound);
  window.removeEventListener("touchstart", tryEnableSound);
  window.removeEventListener("mousedown", tryEnableSound);
  window.removeEventListener("keydown", tryEnableSound);
  window.removeEventListener("wheel", tryEnableSound);
  window.removeEventListener("scroll", tryEnableSound);
}

addArmEvents();
</script>

</body>
</html>
